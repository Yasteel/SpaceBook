@using Spacebook.ViewModel;
@model IEnumerable<ContentFeed>

<link rel="stylesheet" type="text/css" href="~/css/home.css">


@{
    ViewData["Title"] = "Home Page";
}


@foreach (var content in Model)
{
    var time = "";
    if (content.Post.Timestamp > DateTime.Now.AddHours(-24))
    {
        time = "Posted on " + content.Post.Timestamp.ToString("dd/MM/yyyy");
    }
    else
    {
        time = "Posted " + content.Post.Timestamp.ToString("HH") + " hours and " + content.Post.Timestamp.ToString("MM") + " minutes ago";
    }
        
    <div id="contentCard" class="card">

        <div class="card-title">

            <p>
                <span>
                    <image class="profile-image" src="@content.Profile.ProfilePicture" onerror="this.onerror=null;this.src='images/default_avatar.png';"></image>
                </span>
                <span>@content.Profile.Email</span>
            </p>
            <p>@time</p>
        </div>
        <div class="card-body">
            <div id="feedCaption">
                <textarea>@content.Post.Caption</textarea>
            </div>
            <div id="feedMedia">
                @if (content.Post.Type != null)
                {
                    if (content.Post.Type.Contains("image"))
                    {
                        <image src="@content.Post.MediaUrl"></image>
                    }
                    else
                    {
                        <video src="@content.Post.MediaUrl"></video>
                    }
                }
            </div>
            <div class="contentCounters">
                <p>
                    <span>Likes &nbsp @content.Likes.Count()</span>
                    <span>Comments &nbsp @content.Comments.Count()</span>
                </p>
            </div>
            <div id="contentIcons">
                <span>
                    <i class="fa fa-thumbs-up" aria-hidden="true"></i>
                </span>
                <span>
                    <i class='far fa-comment'></i>
                 </span>
                 <span><i class="fa-regular fa-paper-plane"></i></span>
            </div>
        </div>
    </div>
}




<script>
</script>

